{"name":"Gitserver","tagline":"A git repository running in a docker container","body":"### Welcome\r\nSometimes you wonder could life not a bit easier...\r\n> Life is really simple, but we insist on making it complicated. _Confucius_\r\nWell to create a git server you need to have two ingredients:\r\n1. Git\r\n2. Ssh server\r\n\r\nThese two pieces of software are not always so straightforward to setup. However I believe the software developers have done everything they could do to make it simple as possible. \r\n\r\n### Docker\r\nDocker is a nice way to put pieces of software in containers. One of the big advantages of docker is that you can use only what you need to run a particular piece of software. \r\nDocker images tends to grow and sizes of more than 500MB are not uncommon. To reduce the size you can choose from many different linux distributions. I picked [alpine linux](http://www.alpinelinux.org/) to do the jobÂ¸as docker image is it is emere 2MB in size. For reference ubuntu starts at 50MB.\r\n\r\n### Security \r\nSecurity plays an important role in this project. You can find details of hardening the ssh server on this page: https://stribika.github.io/2015/01/04/secure-secure-shell.html\r\n\r\n### Let's get started\r\nFirst you want a running gitserver. \r\n```shell\r\ndocker run -d -p 2222:22 --restart always --name devteam ensignprojects/gitserver\r\n```\r\n\r\n### Configure this server\r\nYou want to use host key files to make your server unique\r\n```shell\r\ndocker exec -it devteam recreatehostfiles\r\n```\r\nFor safety you can remove this script\r\n```shell\r\ndocker exec -it devteam rm /usr/bin/recreatehostfiles\r\n```\r\n\r\nAdd the signed keys to the gitservers of each member of the developer team who needs access to the software projects on the server. If you want to know how to generate these keys, go to: https://help.github.com/articles/generating-ssh-keys/\r\n```shell\r\ndocker exec -it devteam addkey ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQD6hLTCJQ0J9e3KxrG3dqZqWY/Wth9gHT6KyOgylTsmaRHKQfa1Xsdsj54S/JOM/pVqK9XK00KHxWUovvvaLlXErjOgb2PWaJa/0HNtMo80M6nXAtWcP07fSTxdvSZd+ZJC+DszkSciAZmeMKhKAb2+JT/rlCS1a1DF6GpGSsG2Pzo+iuViIywRbdik1fmDmNPyAdauQW6JG5ulBiWBph8/ElpE8DLBwaINUrN4m/tShUUIyB3wI+e5ublGlIheRkkmj66vKvcvTt93GxmLlPR/kg+oY0T8ygZZu5GKQifAVvsy2jgqlKegPHtltr7dpixrPK6b2jA3fWl6VG6f/pa9xOpSJzeimvIA6KInDkVbkwueW662aVPW7OrxUwxFsh56bUrKdpE+e7o6VByA3nAz9KBIEY9JXV/3oUoxJ7zv+vOKN/3vtep2YhianQr4Yzx9/QDlUFcYwANfljRZlQpbEvra8gyhShYC8RUGaeRQqnzJ5hDKZWNswpPyJkCAPS5d940y0R52DFENowlImuhS+QRgrLPOtTqFvkFNb2TmKRUaVXT9sa9ooGmcb/FsxBLvk0mm0yWqi+LO6FSlQwEfipOTvAVqJNeFFZVbqMbgrZczHZkbaVG6QBHQxw9qZfSWtuY7Iku6HcX6GR1+cKYdfXa4yUwy04afEi978jwV4Q== your_email@example.com\r\n```\r\n\r\n*or* \r\n```shell\r\ndocker exec -it devteam addkey `cat ~/.ssh/id_rsa.pub`\r\n```\r\n\r\nCreate a git repository\r\n```shell\r\ndocker exec -it devteam repo create project\r\n```\r\n\r\nAdd the remote repository to your own git repo\r\n```shell\r\ngit remote add origin git@gitserver:/opt/git/project.git\r\n```\r\n\r\nTo get more info to get started with git, you can find a detailed description in https://git-scm.com/book/it/v2/Git-on-the-Server-Setting-Up-the-Server\r\n","google":"UA-72167148-1","note":"Don't delete this file! It's used internally to help with page regeneration."}