<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-dark.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Gitserver by JurrianFahner</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>Gitserver</h1>
          <h2>A git repository running in a docker container</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/JurrianFahner/gitserver/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/JurrianFahner/gitserver/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/JurrianFahner/gitserver" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <h3>
<a id="welcome" class="anchor" href="#welcome" aria-hidden="true"><span class="octicon octicon-link"></span></a>Welcome</h3>

<p>Sometimes you wonder could life not a bit easier...</p>

<blockquote>
<p>Life is really simple, but we insist on making it complicated. <em>Confucius</em></p>
</blockquote>
<p>
Well to create a git server you need to have two ingredients:
<ol>
<li>Git</li>
<li>Ssh server</li>
</ol>

<p>These two pieces of software are not always so straightforward to setup. However I believe the software developers have done everything they could do to make it simple as possible. </p>

<h3>
<a id="docker" class="anchor" href="#docker" aria-hidden="true"><span class="octicon octicon-link"></span></a>Docker</h3>

<p>Docker is a nice way to put pieces of software in containers. One of the big advantages of docker is that you can use only what you need to run a particular piece of software. 
Docker images tends to grow and sizes of more than 500MB are not uncommon. To reduce the size you can choose from many different linux distributions. I picked <a href="http://www.alpinelinux.org/">alpine linux</a> to do the jobÂ¸as docker image is it is emere 2MB in size. For reference ubuntu starts at 50MB.</p>

<h3>
<a id="security" class="anchor" href="#security" aria-hidden="true"><span class="octicon octicon-link"></span></a>Security</h3>

<p>Security plays an important role in this project. You can find details of hardening the ssh server on this page: <a href="https://stribika.github.io/2015/01/04/secure-secure-shell.html">https://stribika.github.io/2015/01/04/secure-secure-shell.html</a></p>

<h3>
<a id="lets-get-started" class="anchor" href="#lets-get-started" aria-hidden="true"><span class="octicon octicon-link"></span></a>Let's get started</h3>

<p>First you want a running gitserver. </p>

<div class="highlight highlight-source-shell"><pre>docker run -d -p 2222:22 --restart always --name devteam ensignprojects/gitserver</pre></div>

<h3>
<a id="configure-this-server" class="anchor" href="#configure-this-server" aria-hidden="true"><span class="octicon octicon-link"></span></a>Configure this server</h3>

<p>You want to use host key files to make your server unique</p>

<div class="highlight highlight-source-shell"><pre>docker <span class="pl-c1">exec</span> -it devteam recreatehostfiles</pre></div>

<p>For safety you can remove this script</p>

<div class="highlight highlight-source-shell"><pre>docker <span class="pl-c1">exec</span> -it devteam rm /usr/bin/recreatehostfiles</pre></div>

<p>Add the signed keys to the gitservers of each member of the developer team who needs access to the software projects on the server. If you want to know how to generate these keys, go to: <a href="https://help.github.com/articles/generating-ssh-keys/">https://help.github.com/articles/generating-ssh-keys/</a></p>

<div class="highlight highlight-source-shell"><pre>docker <span class="pl-c1">exec</span> -it devteam addkey ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQD6hLTCJQ0J9e3KxrG3dqZqWY/Wth9gHT6KyOgylTsmaRHKQfa1Xsdsj54S/JOM/pVqK9XK00KHxWUovvvaLlXErjOgb2PWaJa/0HNtMo80M6nXAtWcP07fSTxdvSZd+ZJC+DszkSciAZmeMKhKAb2+JT/rlCS1a1DF6GpGSsG2Pzo+iuViIywRbdik1fmDmNPyAdauQW6JG5ulBiWBph8/ElpE8DLBwaINUrN4m/tShUUIyB3wI+e5ublGlIheRkkmj66vKvcvTt93GxmLlPR/kg+oY0T8ygZZu5GKQifAVvsy2jgqlKegPHtltr7dpixrPK6b2jA3fWl6VG6f/pa9xOpSJzeimvIA6KInDkVbkwueW662aVPW7OrxUwxFsh56bUrKdpE+e7o6VByA3nAz9KBIEY9JXV/3oUoxJ7zv+vOKN/3vtep2YhianQr4Yzx9/QDlUFcYwANfljRZlQpbEvra8gyhShYC8RUGaeRQqnzJ5hDKZWNswpPyJkCAPS5d940y0R52DFENowlImuhS+QRgrLPOtTqFvkFNb2TmKRUaVXT9sa9ooGmcb/FsxBLvk0mm0yWqi+LO6FSlQwEfipOTvAVqJNeFFZVbqMbgrZczHZkbaVG6QBHQxw9qZfSWtuY7Iku6HcX6GR1+cKYdfXa4yUwy04afEi978jwV4Q== your_email@example.com</pre></div>

<p><em>or</em> </p>

<div class="highlight highlight-source-shell"><pre>docker <span class="pl-c1">exec</span> -it devteam addkey <span class="pl-s"><span class="pl-pds">`</span>cat <span class="pl-k">~</span>/.ssh/id_rsa.pub<span class="pl-pds">`</span></span></pre></div>

<p>Create a git repository</p>

<div class="highlight highlight-source-shell"><pre>docker <span class="pl-c1">exec</span> -it devteam repo create project</pre></div>

<p>Add the remote repository to your own git repo</p>

<div class="highlight highlight-source-shell"><pre>git remote add origin git@gitserver:/opt/git/project.git</pre></div>

<p>To get more info to get started with git, you can find a detailed description in <a href="https://git-scm.com/book/it/v2/Git-on-the-Server-Setting-Up-the-Server">https://git-scm.com/book/it/v2/Git-on-the-Server-Setting-Up-the-Server</a></p>
        </section>

        <footer>
          Gitserver is maintained by <a href="https://github.com/JurrianFahner">JurrianFahner</a><br>
          This page was generated by <a href="https://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>

                  <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-72167148-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

      </div>
    </div>
  </body>
</html>
